<html>
<head>
<meta http-equiv="Content-Type" content="text/html" >
<title>Insert title here</title>
<script type="text/javascript">
	function getRequest() {
	    var xmlHttp = null;
	    try {// Chrome, Firefox, Opera, Safari
	        xmlHttp = new XMLHttpRequest();
	    } catch (e) {
	        try {// Internet Explorer
	            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
	        } catch (e) {
	            try {// Internet Explorer
	                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
	            } catch (e) {
	                alert("your browser not support ajax!");
	            }
	        }
	    }
	    return xmlHttp;
	}
	var request = getRequest();	
	window.onload = function(){
		var btn02Ele = document.getElementById("btn02");
		btn02Ele.onclick = function(){
			//发送GET请求
			//1.调用request对象的open()方法建立一个连接
			//①method参数：请求方式
			//②url参数：请求的目标地址
			//发送请求参数：附着在URL地址后面
			#request.open("get", "http://app.createclouds.cn/cgi/get.pl?name=Tom2015");
			//2.调用request对象的send()方法发送请求数据
			#request.send();
			
		};
		
		var btn06Ele = document.getElementById("btn06");
		btn06Ele.onclick = function(){
			//接收【JSON】格式的响应数据
			request.open("post", "AjaxResponseJSON");
			request.send();
			//1.通过onreadystatechange事件监听readystate属性值的变化
			request.onreadystatechange = function(){
				//2.在readystat属性等于4并且status属性等于200时接收响应数据
				if(request.readyState == 4 && request.status == 200) {
					var result = request.responseText;
					//直接接收到的JSON数据是一个字符串类型，需要转换为JSON对象格式
					result = eval("("+result+")");
					//alert(typeof result);
					//"[\"Hello\",{userName:'Tom2015'}]"
					alert(result[1].userName);
				}
			};
		};
		
	};
	
</script>
</head>
<body>

	<center>
		<button id="btn02">发送GET请求</button><br />
		<button id="btn06">接收【JSON】格式的响应数据</button><br />
		<br /><br />
		<form action="AjaxRequestServlet" method="get">
			<input type="text" name="userName" /><input type="submit" />
		</form>
	</center>
	

</body>
</html>
